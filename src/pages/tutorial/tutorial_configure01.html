---
layout: docpage
section: Tutorial
topic: Configure LazyStack
---
{{> tutorial_menu}}
<div class=lz-r-content>
<h3>Configure LazyStack Projects and DynamoDB</h3>
<p>In this step we make some additions to the LazyStack.yaml file to support the use of DynamoDB. Before we look at 
    the configuration directives in detail, here is a high-level summary of what we need to do:
</p>
<ul>
    <li>Use <a href="/generator/generator_apitagmap.html">ApiTagMap</a> directive to map API endpoints to two ApiGateways.</li>
    <li>Use <a href="/generator/generator_projectoptions.html">ProjectOptions</a> directive to configure these project options
        <ul>
            <li><a href="/generator/generator_properties.html">Properties</a></li>
            <li><a href="/generator/generator_projectreferences.html">ProjectReferences</a> - tell Lambda projects and WebApi projects about the new PetStoreRepo project.</li>
            <li><a href="/generator/generator_serviceregistrations.html">ServiceRegistrations</a> - use dependency injection to get instances of PetStoreRepo and DynamoDB.</li>
        </ul>
    </li>
    <li>Use <a href="/generator/generator_awsresources.html">AwsResources</a> directive to define AWS::DynamoDB::Table resource for our stack.</li>
</ul>
<h4>Update LazyStack.yaml and Generate Projects</h4>
<ol>
   <li>Download this <a href="/assets/tutorial/LazyStack01.yaml" download="LazyStack.yaml">LazyStack.yaml</a> file and move it into the 
    solution's root folder.</li>
    <li>Update the LazyStack.yaml file ProfileName and RegionName values.</li>
    <li>Save the LazyStack.yaml file.</li>
    <li>Select Tools &RightArrow; LazyStack - Generate Projects. 
        <p>The LazyStack.log tab opens and logs are produced as Projects and generated files are updated.</p>
    </li> 
    <li>Rebuild Solution. All projects in the solution are compiled successfully.</li>
</ol>
<h4>Update WebApi project (PetStore in this case) launchSettings.json file</h4>
<ol>
    <li>Open the PetStore\Properties\launchSettings.json file.</li>
    <li>Add the "TABLE_NAME" environmental variable as shown below on line 25.</li>
</ol>
<pre class="line-numbers"><code class="language-json">
{
    "iisSettings": {
      "windowsAuthentication": false, 
      "anonymousAuthentication": true, 
      "iisExpress": {
        "applicationUrl": "http://localhost:62817",
        "sslPort": 44399
      }
    },
    "profiles": {
      "IIS Express": {
        "commandName": "IISExpress",
        "launchBrowser": true,
        "environmentVariables": {
          "ASPNETCORE_ENVIRONMENT": "Development"
        }
      },
      "PetStore": {
        "commandName": "Project",
        "launchBrowser": true,
        "applicationUrl": "https://localhost:5001;http://localhost:5000",
        "environmentVariables": {
          "ASPNETCORE_ENVIRONMENT": "Development",
          "TABLE_NAME": "PetStoreDev-DB"
        }
      }
    }
  }
</code></pre>
<p></p>
<h4>Step Summary</h4>
<p>In this step we updated the LazyStack.yaml file to create a DynamoDB resource and configure the 
    WebApi (PetStore) project and Lambdas projects to reference the PetStoreRepo project. We also 
    inserted an environment variable "TABLE_NAME" in the WebApi project's launchSettings.json file to 
    reference a table called "PetStoreDev-DB" in the DynamoDb resource.
</p>
</div> 