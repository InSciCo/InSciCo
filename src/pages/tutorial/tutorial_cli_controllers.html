---
layout: docpage
menu0: tutorials
menu1: mdd
menu2: cli
---

<div class=lz-r-content>
    <h3>Implement PetStoreCLI application Controllers</h3>
    <p>In this lesson step we will add controller logic to the Controller projects in the PetStoreCLI solution.
        In most applications we have a persistence layer, often called the repository layer. In this
        tutorial we create a PetStoreRepo project to use DynamoDB to store our data and
        then configure our Controller classes to use that PetStoreRepo. Our PetStoreRepo will use 
        AWS DynamoDB, so we use the LazyStackDynamoDBRepo NuGet package to make implementing generic 
        Create, Read, Update, Delete and List (CRUDL) operations on the Amazon DynamoDB easy. 
    </p>
    <h4>2.1 Create the PetStoreRepo project</h4>
    <ol>
        <li>CD into the solution folder (LazyStackTutorial\PetStoreCLI).</li>
        <li>Create PetStoreRepo project from "C# Class Library (.NET Core)" template.
        <pre><code class="language-shellsession">dotnet new classlib -o PetStoreRepo</code></pre>
        Windows: <pre><code class="language-shellsession">dotnet sln add PetStoreRepo\PetStoreRepo.csproj</code></pre>
        MacOS/Linux: <pre><code class="language-shellsession">dotnet sln add PetStoreRepo/PetStoreRepo.csproj</code></pre>
            You now have a PetStoreRepo C# Class Lib project in your solution.
        </li>
        <li>Replaced the contents of the PetStoreRepo.csproj with this content
<pre><code class="language-xml">&lt;Project Sdk="Microsoft.NET.Sdk">
  &lt;PropertyGroup>
    &lt;TargetFramework>netcoreapp3.1&lt;/TargetFramework>
  &lt;/PropertyGroup>

  &lt;ItemGroup>
    &lt;PackageReference Include="LazyStackDynamoDBRepo" Version="1.0.0" />
    &lt;ProjectReference Include="..\Controllers\OrderController\OrderController.csproj" />
    &lt;ProjectReference Include="..\Controllers\OrderSecureController\OrderSecureController.csproj" />
    &lt;ProjectReference Include="..\Controllers\PetController\PetController.csproj" />
    &lt;ProjectReference Include="..\Controllers\PetSecureController\PetSecureController.csproj" />
  &lt;/ItemGroup>

&lt;/Project></code></pre>
Note the TargetFramework is "netcoreapp3.1".
        </li>
        <li>Delete the Class1.cs file from the PetStoreRepo project.</li>
        <li>Create a PetStoreRepo\Models folder.</li>
        <li>Click on the following class files to download them and then move them into the Models folder.
            <ul>
                <li><a href="/assets/tutorial/CLI/CategoryRepo.cs" download="CategoryRepo.cs">CategoryRepo.cs</a></li>
                <li><a href="/assets/tutorial/CLI/OrderRepo.cs" download="OrderRepo.cs">OrderRepo.cs</a></li>
                <li><a href="/assets/tutorial/CLI/PetRepo.cs" download="PetRepo.cs">PetRepo.cs</a></li>
                <li><a href="/assets/tutorial/CLI/TagRepo.cs" download="TagRepo.cs">TagRepo.cs</a></li>
            </ul>
        </li>
        <li>CD into the solution folder (LazyStackTutorial\PetStoreCLI) and Build the solution.
            <pre><code class="language-bash">dotnet build</code></pre>
                The solution compiles successfully.
        </li>               
    </ol>
    <h4>Step Summary</h4>
    <p>In this step we implemented the PetStoreRepo project by:</p>
    <ul>
        <li>Creating a PetStoreRepo project using the C# Class(.NET Core) Library template.</li>
        <li>Modifying the project to target netcoreapp3.1 instead of net5</li>
        <li>Referencing the LazyStackDynamoDBRepo NuGet package generated controller projects.</li>
        <li>Implementing the PetStoreRepo repository logic with the CategoryRepo.cs, OrderRepo.cs, PetRepo.cs and 
            TagRepo.cs files.
        </li>
    </ul>

</div>