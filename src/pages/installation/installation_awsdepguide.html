---
layout: docpage
section: Install
topic: GettingStarted
---
{{> installation_menu}}
<div class="lz-r-content manual-list">
    <h3>LazyStack AWS SMF Deployment Overview</h4>
        <p>Here is a technical overview of the SMF deployment. Review this overview to get an idea of what the install
            will do and what resources and skills you need to perform the install.
        </p>
        <ul>
            <li>Use Cases:
                <ul>
                    <li>Use Case: Install SMF
                        <ul> These actions are performed on the Management Workstation
                            and/or AWS Console. Much of the following configuration are are automated with PowerShell
                            scripts.
                            <li>Step 1- Create AWS Organization
                                <ul>
                                    <li>1.1 Configure Management Workstation
                                        <ul>
                                            <li>Install PowerShell</li>
                                            <li>Install Git client</li>
                                        </ul>
                                    </li>
                                    <li>1.2 Create AWS Management Account
                                        <ul>
                                            <li>Sign up for AWS Account</li>
                                            <li>Create IAM User - OrgMgmt</li>
                                            <li>Install AWS CLI</li>
                                            <li>Create Named AWS Profile - OrgMgmt</li>
                                            <li>Install AWS SAM CLI</li>
                                        </ul>
                                    </li> 
                                    <li>1.3 Create AWS Organization<br>
                                        <ul>
                                            <li>Run Org_Create.ps1 to:
                                                <ul>
                                                    <li>Create Organizational Unit - OrgDevOU</li>
                                                    <li>Create Organizational Unit - OrgTestOU</li>
                                                    <li>Create Organizational Unit - OrgProdOU</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>Step 2 - Create Developer Account<br>
                                <ul>
                                    <li>Run Dev_Account_Create.ps1 script to:
                                        <ul>
                                            <li>Create AWS developer account - ex: OrgDevJoe</li>
                                            <li>Move developer account into the Dev Organizational Unit</li>
                                            <li>Create IAM User for the developer</li>
                                            <li>Create Developers IAM Group having PowerUser and limited IAM permissions</li>
                                            <li>Assign IAM User to IAM Group</li>
                                            <li>Create named role profile - OrgDevJoeAccess<br>
                                                OrganizationalAccountAccessRole policy allows Management account
                                                to administer the developer's Account.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>

                            <li>Step 3 - Create System Test Account<br>
                                <ul>
                                    <li>Run Test_Account_Create.ps1 script to:
                                        <ul>
                                            <li>Create a System Test Account - OrgSysTest</li>
                                            <li>Move it under the Test Organizational Unit - OrgTestOU</li>
                                            <li>Create the Test Account IAM User</li>
                                            <li>Create the Administrators group</li>
                                            <li>Assign the IAM User to the Administrators group</li>
                                            <li>Create a Management Workstation AWS profile with
                                                OrganizationalAccountAccessRole policy to allow Management account
                                                to administer the Test Account.
                                            </li>
                                        </ul>
                                    </li>
                                    <li>Step 3.1 - Setup Continuous Integration and Continuous Deployment for Test Account Stack
                                        <ul>
                                            <li>Create a CodeBuild GitHub Connection for the Test Account</li>
                                            <li>Run Test_CICD_Projects_Install.ps1 to:
                                                <ul>
                                                    <li>Install a CodeBuild project that builds, tests and publishes a Pull Request (PR) stack when a PR is created or updated.</li>
                                                    <li>Install a CodeBuild project that deletes a PR stack when the PR is closed.</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>Step 4 - Create System Production Account<br>
                                <ul>
                                    <li>Run Prod_Account_Create.ps1 script to:
                                        <ul>
                                            <li>Create a System Prod Account - OrgSysProd</li>
                                            <li>Move it under the Prod Organizational Unit - OrgProdOU</li>
                                            <li>Create the Prod Account IAM User</li>
                                            <li>Create the Administrators group</li>
                                            <li>Assign the IAM User to the Administrators group</li>
                                            <li>Create a Management Workstation AWS profile with
                                                OrganizationalAccountAccessRole policy to allow Management account
                                                to administer the Production Account.
                                            </li>
                                        </ul>
                                    </li>
                                    <li>Step 4.1 - Setup Continuous Deployment for System Production Account Stack
                                        <ul>
                                            <li>Create a CodeBuild GitHub Connection for the Production Account</li>
                                            <li>Run Prod_CICD_Projects_Install.ps1 to:
                                                <ul>
                                                    <li>Create a CodeBuild Connection among Production Account and GitHub</li>
                                                    <li>Install a CodeBuild project that builds, tests and publishes a Pull Request (PR) stack when a PR is created or updated.</li>
                                                    <li>Install a CodeBuild project that deletes a PR stack when the PR is closed.</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <br>
                    <li>Use Case: Developer Publishes a Stack to their Development Account
                        <ul>
                            <li>Publish stack using AWS Toolkit Extension for Visual Studio IDE (Windows)</li>
                            <li>Publish stack using AWS SAM CLI</li>
                        </ul>
                    </li>
                    <br>
                    <li>Use Case: Developer Creates GitHub Pull Request
                        <ul>
                            <li>Test Account CodeBuild Project publishes stack for PR</li>
                        </ul>
                    </li>
                    <br>
                    <li>Use Case: Developer Updates GitHub Pull Request
                        <ul>
                            <li>Test Account CodeBuild Project updates stack for PR</li>
                        </ul>
                    </li>
                    <br>
                    <li>Use Case: GitHub Pull Request is merged
                        <ul>
                            <li>Test Account CodeBuild Project deletes stack for PR</li>
                            <li>Prod Account CodeBuild Project creates/updates Production stack</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <br>
            <li>Typical Customer Deployment AWS Resources
                <ul>
                    <li>AWS Organization
                        <ul>
                            <li>Management Account - OrgMgmt
                                <ul>
                                    <li>Member of IAM User Group - Administrators</li>
                                    <ul>
                                        <li>AWS Policy AdministratorAccess</li>
                                    </ul>
                                    <li>IAM User - OrgMgmt
                                        <li>Member of Administrators User Group</li>
                                    </li>
                                </ul>
                            </li>
                            <li>Development Organizational Unit - OrgDevOU
                                <ul>
                                    <li>Developer account(s) - ex: OrgDevJoe
                                        
                                        <ul>
                                            <li>Customer Policy IAMUserCredsPolicy (see IAMUserCredsPolicy.json)
                                                <ul>
                                                    <li>AllowViewAccountInfo</li>
                                                    <li>AllowManageOwnPasswords</li>
                                                    <li>AllowManageOwnAccessKeys</li>
                                                    <li>AllowManageOwnSSHPublicKeys</li>
                                                </ul>
                                            </li>
                                            <li>IAM User Group Developers
                                                <ul>
                                                    <li>AWS Policy PowerUserAccess</li>
                                                    <li>Customer Policy IAMUserCredsPolicy</li>
                                                </ul>
                                            </li>
                                            <li>IAM User - OrgDevJoe
                                                <ul>
                                                    <li>Member of Developers User Group</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>Test Organizational Unit - OrgTestOU
                                <ul>
                                    <li>System Test Account - OrgSysTest
                                        <ul>
                                            <li>Administrators User Group
                                                <ul>
                                                    <li>AWS Policy AdministratorAccess</li>
                                                </ul>
                                            </li>
                                            <li>IAM User - OrgSysTest
                                                <ul>
                                                    <li>Member of Administrators User Group</li>
                                                </ul>
                                            </li>
                                            <li>CodeBuild Connection to GitHub repository</li>
                                            <li>CodeBuild Project Stack to Create/Update test stack for a new/updated Pull
                                                Request (see Test_CICD_Project_PR_Update.yaml)
                                                <ul>CodeBuild Project Stack Resources:
                                                    <li>AWS::S3::Bucket - build artifacts1</li>
                                                    <li>AWS::CodeBuild::Project
                                                        <ul>
                                                            <li>Webhook on PR Create/Update</li>
                                                            <li>Inline Script for Build, Test, and Deploy</li>
                                                        </ul>
                                                    </li>
                                                    <li>AWS::IAM::Role - CodeBuildRole</li>
                                                    <li>AWS::IAM::Policy - CodeBuildPolicy</li>
                                                </ul>
                                            </li>
                                            <li>Codebuild Project to Delete test stack for for a merged Pull Request (see Test_CICD_Project_PR_Delete.yaml)
                                                <ul>CodeBuild Project Stack Resources:
                                                    <li>AWS::S3::Bucket - build artifacts1</li>
                                                    <li>AWS::CodeBuild::Project
                                                        <ul>
                                                            <li>Webhook on PR Merge</li>
                                                            <li>Inline Script for delete stack</li>
                                                        </ul>
                                                    </li>
                                                    <li>AWS::IAM::Role - CodeBuildRole</li>
                                                    <li>AWS::IAM::Policy - CodeBuildPolicy</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>Prod Organizational Unit - OrgProdOU
                                <ul>
                                    <li>System Production Account - OrgSysProd
                                        <ul>
                                            <li>Administrators User Group
                                                <ul>
                                                    <li>AWS Policy AdministratorAccess</li>
                                                </ul>
                                            </li>
                                            <li>IAM User - OrgSysProd
                                                <ul>
                                                    <li>Member of Administrators User Group</li>
                                                </ul>
                                            </li>
                                            <li>CodeBuild Connection to GitHub repository</li>
                                            <li>CodeBuild Project Stack to Create/Update Prod stack for a merged Pull
                                                Request (see Test_CICD_Push_Update.yaml)
                                                <ul>CodeBuild Project Stack Resources:
                                                    <li>AWS::S3::Bucket - build artifacts1</li>
                                                    <li>AWS::CodeBuild::Project
                                                        <ul>
                                                            <li>Webhook on PR Merge</li>
                                                            <li>Inline Script for Build, and Deploy</li>
                                                        </ul>
                                                    </li>
                                                    <li>AWS::IAM::Role - CodeBuildRole</li>
                                                    <li>AWS::IAM::Policy - CodeBuildPolicy</li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <br>
            <li>Deployment Naming
                <ul>
                    <li>OrgCode prefix to be used for organizational units and accounts</li>
                    <li>SysCode prefix to be used for system test and system production accounts</li>
                </ul>
            </li>
            <br>
            <li>Expected Time for Deployment
                <ul>
                    <li>SMF Part 1 - </li>
                    <li>SMF Part 2 - </li>
                    <li>SMF Part 3 - </li>
                    <li>SMF Part 4 - </li>
                </ul>
            </li>
            <br>
            <li>Technical Prerequisites and Requirements
                <ul>
                    <li>Management Workstation with internet access and operating system compatible with PowerShell, AWS
                        CLI, and AWS SAM CLI</li>
                    <li>AWS Account Creation requirements
                        <ul>
                            <li>Unique email address (or alias) for each account</li>
                            <li>Credit Card</li>
                            <li>If you are creating more than 4 accounts (Mgmt, 1st Dev Account, Test Account, and Prod
                                Account) then you will need to request AWS increase the maximum number of accounts in 
                                your organization beyond the default limit of 4.
                            </li>
                        </ul>
                    </li>
                    <li>GitHub Account</li>
                    <li></li>
                </ul>
            </li>
            <br>
            <li>Technical Skills and Knowledge
                <ul>
                    <li>Some basic experience installing software on a workstation</li>
                    <li>Experience running scripts in a command terminal/window</li>
                    <li>Experience editing text files</li>
                    <li>We recommend having reviewed AWS Getting Started Guides</li>
                </ul>
            </li>
            <br>
            <li>Environmental Configuration <br>
                There are no special environmental configurations required beyond having a workstation running a
                operating system supported by PowerShell, AWS CLI and AWS SAM CLI.
            </li>
            <br>
            <li>Architectural Diagrams
                <ul>
                    <li>Software Management Framework Flow
                        <img src="/assets/img/SDLCFeatureflowVSIDEOverview.svg"></a>
                    </li>
                    <br>
                    <li>AWS Organization Overview
                        <img src="/assets/img/LazyStackSMF2.svg"></a>
                    </li>
                    <br>
                    <li>AWS CodeBuild and Cloud Formation Services
                        <img src="/assets/img/AwsSetup2.svg"></a>
                    </li>
                    <br>
                    <li>AWS Root and IAM Users with Management and Development workstation AWS Profiles
                        <img src="/assets/img/AwsSetupUsers2.svg"></a>
                    </li>
                    <br>
                    <li>CI/CD Stacks
                        <img src="/assets/img/SDLCFeatureflowVSIDE.svg"></a>
                    </li>
                </ul>
            </li>
            <br>
            <li>Security References</li>
            <li>AWS Costs</li>
            <li>AWS Sizing</li>
        </ul>
</div>