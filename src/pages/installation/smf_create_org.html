---
layout: docpage
section: Install
topic: GettingStarted
install: smf
---
{{> installation_menu}}
<div class=lz-r-content>
    <h4>Steps 4) Create AWS Organization</h4>
    <dl>
        <dt>Prerequisites: AWS Mgmt. Account Setup Complete</dt>
        <dt>Estimated Time: 5 minutes</dt>
        <dt>Estimated Cost: none</dt>
        <dt>Perform this step on the Management Workstation.</dt>
    </dl>

    <p>In this step we will use the LazyStackSMF.ps1 script to create an AWS Organization, 
        AWS Organizational Units, and AWS Tutorial System Accounts with CI/CD pipelines.
    </p>
    <h5>Configuration Steps</h5>
    <ol>
        <li>Open a PowerShell terminal.</li>
        <br>
        <li>CD into the LayStackSettings folder.</li>
        <br>
        <li>Issue the following command:
            <pre><code class="language-bashshell">..\LazyStackSMF\LzConfigure.ps1</code></pre>
            You will be prompted for the following:
            <ul>
                <li>OrgCode</li>
                <li>AWS Management Account Profile</li>
                <li>AWS Region</li>
                <li>GitHub Organization Name</li>
                <li>GitHub PetStore repository</li>
                <li>GitHub LazyStackSMF repository</li>
                <li>Email address for Tutorial System Test AWS Account</li>
                <li>Email address for Tutorial System Production AWS Account</li>
            </ul>
            <br>
            <h5>What to do if the script fails?</h5>
            <p>We have written the script to be fault tolerant. If you get an error, you should 
                receive a meaningful error message and the script will stop. You can then address 
                the underlying issue and re-run the script, it will pick up where it left off.
                
                If you get an error when running the script, it is most likely going to be because 
                of one of the following issues:
            </p>
            <ul>
                <li>AWS Management Account doesn't have appropriate permissions. This can happen when 
                    you are using an existing account instead of creating one from scratch using the 
                    the setup instructions in SMF Step 3.
                </li>
                <li>You have exceeded the maximum number of accounts allowed in the AWS Organization. 
                    By default, AWS sets this maximum at 4. You may request additional accounts. If 
                    you are using LazyStack SMF to create a new AWS organization from scratch, you 
                    should not see this issue during the initial Setup.
                </li>
                <li>Non-unique email address. Every AWS must have a unique email address. If you  
                    supply an email address that has already been used (in the last 90 days) for an 
                    account, the account creation process will fail.
                </li>
            </ul>
            <p>For more details on how this script works, visit the <a href="/userguide/smf_lzconfigure.html"{{>newtab}}>LazyStackSMF Script</a> 
                User Guide section.
            </p>            
            <br>
            Here is an example of running the script:
            <pre><code class="language-bashshell">todo script transcript
</code></pre>
        </li>
    </ol>
    <h5>Step Summary</h5>
    <p>In this step we created our AWS Organization, AWS Organizational Units, 
        and AWS Tutorial System Accounts with CI/CD pipelines.
    </p>

</div>