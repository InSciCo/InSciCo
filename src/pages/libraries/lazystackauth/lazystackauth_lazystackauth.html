---
layout: docpage
menu0: userguide
menu1: libs
menu2: auth
---

<div class=lz-r-content>
    <h3>LazyStackAuth Library</h3>
    <p>LazyStackAuth is an independent library that you can use from a C# app to authenticate with an AWS Stack.
        There is no <em>special</em> or proprietary sauce here but the library does make some
        assumptions about the configuration of your AWS Cognito resources. If you are using LazyStack to 
        generate these serverless.template files then that is all handled for you. You can certainly use 
        LazyStackAuth with your own stack, review the serverless.template files generated by LazyStack to 
        see how Cognito resources are configured for this library. The LazyStack tutorial  is a comprehensive  
        example of using LazyStackAuth and a LazyStack generated ClientSDK in a .NET app.
    </p>
    <ul>
        <li><a  href="/libraries/lazystackauth/lazystackauth_authprovider.html">AuthProvider classes</a> 
            <p>One or more IAuthProvider implementations implementing calls to the Cognito and/or other 
                auth providers. The AuthProviderCognito class implements comprehensive sign-up, sign-in 
                and user management features against the AWS Cognito UserPool authentication provider. 
            </p>
        </li>
        <li><a  href="/libraries/lazystackauth/lazystackauth_authprocess.html">AuthProcess class</a> 
            <p>The AuthProcess class implements an INotifyPropertyChanged wrapper around the IAuthProvider 
                interface to provide bindable properties and events suitable for use in an event driven UI.
            </p>
        </li>
        <li><a  href="/libraries/lazystackauth/lazystackauth_lzhttpclient.html">LzHttpClient class</a> 
            <p>The LzHttpClient class is a thin wrapper around the standard HttpClient class that
                knows how to select an appropriate ApiGateway call and then sign the HttpRequests 
                to that AWS ApiGateway appropriately.</p>
        </li>
    </ul>

    <h4>State Driven Authentication with AuthProcess</h4>
    <p>AuthProcess provides a state driven authentication machine implementing a iterative authentication challenge
        process. The properties and methods of the AuthProcess class are largely self-explanatory so we introduce 
        the AuthProcess class by presenting the simplest happy-path use-cases;
    </p>
    
    <h5>Sign In Happy Path</h5>
    <ol>
        <li>AuthProcess.IsSignedIn == false // User is not signed in</li>
        <li>AuthProcess.StartSignInAsync();</li>
        <li>AuthProcess.Login = "login";</li>
        <li>AuthProcess.VerifyLoginAsync();</li>
        <li>AuthProcess.Password = "password";</li>
        <li>VerifyPassword();</li>
        <li>AuthProcess.IsSignedIn == true</li>
    </ol>
    
    <h5>Sign Up Happy Path</h5>
    <ol>
        <li>AuthProcess.IsSignedIn == false // User is not signed in</li>
        <li>AuthProcess.StartSignUpAsync();</li>
        <li>AuthProcess.Login = "login";</li>
        <li>AuthProcess.VerifyLoginAsync();</li>
        <li>AuthProcess.Password = "password";</li>
        <li>VerifyPasswordAsync();</li>
        <li>AuthProcess.Email = "myemail@gmail.com";</li>
        <li>AuthProcess.VerifyEmail();</li>
        <li>// Cognito sends auth code to user's email;</li>
        <li>AuthProcess.Code = "code";</li>
        <li>AuthProcess.VerifyCodeAsync();</li>
        <li>// The user can now Sign In with specified login and password.</li>
    </ol>
    
    <h5>Reset Password Happy Path</h5>
    <ol>
        <li>AuthProcess.IsSignedIn == false // must be signed out to do password reset</li>
        <li>AuthProcess.StartResetPasswordAsync();</li>
        <li>AuthProcess.Login = "login"</li>
        <li>AuthProcess.VerifyLoginAsync();</li>
        <li>AuthProcess.NewPassword = "newpassword"</li>
        <li>AuthProcess.VerifyNewPasswordAsync();</li> 
        <li> // AWS Sends validation code to user's email.</li>
        <li>AuthProcess.Code = "code";</li>
        <li>AuthProcess.VerifyCodeAsync();</li>
        <li>// The user can now Sign In with the new password.</li>
    </ol>
    
    <h5>Update Password Happy Path</h5>
    <ol>
        <li>AuthProcess.IsSignedIn == true  // must be signed in to update password</li>
        <li>AuthProcess.StartUpdatePasswordAsync();</li>
        <li>AuthProcess.Password = "currentpassword";</li>
        <li>VerifyPasswordAsync();</li>
        <li>AuthProcess.NewPassword = "newpassword";</li>
        <li>VerifyNewPasswordAsync();</li>
        <li>// Password has been changed and should be used on next Sign In.</li>
    </ol>
    
    <h5>Update Email Happy Path</h5>
    <ol>
        <li>AuthProcess.IsSignedIn == true // must be signed in to update email</li>
        <li>StartEmailUpdateAsync();</li>
        <li>AuthProcess.Email = "newemail@gmail.com"</li>
        <li>VerifyEmailAsync();</li>
        <li>// AWS sends validation code to user's new email.</li>
        <li>AuthProcess.Code = "code";</li>
        <li>AuthProcess.VerifyCodeAsync();</li>
        <li>// Email has been updated.</li>
    </ol>
    
    <H4>Comprehensive State Management and Events</H4>
    <p>The AuthProcess class implements numerous properties and events that make
        it very simple to build UI page(s) to support user authentication tasks. The
        LazyStack tutorial provides a Xamarin single page implementation that illustrates best 
        practice use of AuthProcess in a MVVM architecture. 
    </p>
    {{>btmspacer}}
    
</div>