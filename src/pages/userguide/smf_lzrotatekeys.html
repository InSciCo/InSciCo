---
layout: docpage
section: UserGuide
menu0: userguide
menu1: smf
---

<div class=lz-r-content>
    <h3>Rotate Keys</h3>
    <p>It is best practice to rotate your AWS CLI Profile keys and GitHub Personal Access Tokens 
        periodically. 
    </p>

    <h5>AWS CLI Profile Keys</h5>
    <p>For each organization, LazyStack SMF creates multiple AWS CLI Named Profiles but only  
        the OrgMgmt account named profile has an aws_secret_access_key. You should rotate this 
        key periodically using <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey_CLIAPI" {{>newtab}}>these AWS instructions</a>. 
    </p>

    <h5>GitHub Personal Access Tokens</h5>
    <p>To update a Personal Access Token you need to:</p>
    <ol >
        <li>Log into your GitHub personal account.</li>
        <li>Click on the user profile icon in the upper right of the page. The user profile menu appears.</li>
        <li>Select the Settings menu item. The "personal account page" appears.</li>
        <li>Select "Developer Settings" from the left hand menu. The "Developer Settings" page appears.</li>
        <li>Select "Personal access tokens" from the left hand menu. The "Personal access tokens" page appears.
        </li>
        <li>Generate Admin Account PAT
            <ol type="a">
                <li>Click on the Generate new token button. The "Confirm access" page appears. Note: GitHub may
                    request your password at this point, provide it if requested. The "New personal access token" page
                    appears"
                </li>
                <li>Enter a descriptive note, ex: "New Git Admin Access".</li>
                <li>Check the "repo" option.</li>
                <li>Check the "admin:repo_hook" option.</li>
                <li>Click the "Generate token" button. The generated token is displayed.</li>
                <li>Copy this token and replace the existing one in the "GitAdminToken.pat" file in the LazyStackSettings folder. </li>
            </ol>
        </li>
        <li>Generate CodeBuild Account PAT
            <ol type = "a">
                <li>Click on the Generate new token button. The "Confirm access" page appears. Note: GitHub may
                    request your password at this point, provide it if requested. The "New personal access token" page
                    appears"
                </li>
                <li>Enter a descriptive note, ex: "New AWS CodeBuild Access".</li>
                <li>Check the "repo" option.</li>
                <li>Check the "admin:repo_hook" option.</li>
                <li>Click the "Generate token" button. The generated token is displayed.</li>
                <li>Copy this token and replace the existing one in the "GitCodeBuildToken.pat" file in the LazyStackSettings folder. </li>
            </ol>
        </li>
        <br>
        <li>CD into the LazyStackSettings folder and run:<pre><code class="language-bashshell">..\LazyStackSMF\LzConfigure.ps1</code></pre>
        <br>
        </li>
        <li>Back in the GitHub console, delete the old Personal Access Tokens.</li>
        <br>
        <li>Sign out of the GitHub account.</li>
    </ol>

    {{>btmspacer}}
</div> 